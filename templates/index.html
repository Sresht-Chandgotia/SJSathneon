<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Nav HUD</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Orbitron:wght@600;800&display=swap"
      rel="stylesheet"
    />

    <!-- Leaflet -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- Leaflet Routing Machine (added for routing) -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/app.css') }}"
    />
  </head>
  <body class="theme-dark">
    <nav class="center-nav" aria-label="Top navigation">
  <div class="nav-left">
    <button
            id="hudToggle"
            class="rail-tab"
            aria-label="Open Control Panel"
            aria-expanded="false"
          >
            â˜°
          </button>
    <!-- Search toggle + expandable input -->
    <div class="nav-search hud-search-wrapper" id="navSearchWrap">
      <button
        class="search-toggle"
        id="navSearchToggle"
        aria-expanded="false"
        aria-label="Open search"
        title="Search"
      >
        ğŸ”
      </button>

      <!-- keep id="search" so existing JS selectors still work; this input will be moved to navbar -->
      <div class="search-input-wrap">
        <input
          id="search"
          class="hud-input nav-hud-input"
          placeholder="Search places (e.g., 'hospital near Andheri')"
          aria-label="Search places"
        />
      </div>
      <ul id="suggestionsList" class="suggestions"></ul>
    </div>
  </div>

  <div class="nav-right" id="navPillsWrap" role="toolbar" aria-label="Quick actions">
    <!-- Pills (icon + label). Labels hidden when nav search expands -->
    <button class="pill pill-action" id="saveDestBtn" title="Save destination" aria-pressed="false">
      <span class="pill-icon">â˜†</span>
      <span class="pill-label">Save</span>
    </button>

    <button class="pill pill-action" id="clearDestBtn" title="Clear destination">
      <span class="pill-icon">ğŸ—‘ï¸</span>
      <span class="pill-label">Clear destination</span>
    </button>

    <button class="pill pill-action" id="clearStartBtnNav" title="Clear start">
      <span class="pill-icon">ğŸ§­</span>
      <span class="pill-label">Clear start</span>
    </button>

    <div class="pill-sep" aria-hidden="true"></div>

    <!-- Mode pills -->
    <button class="pill mode-pill active" data-mode="driving" title="Driving">
      <span class="pill-icon">ğŸš—</span>
      <span class="pill-label">Drive</span>
    </button>
    <button class="pill mode-pill" data-mode="walking" title="Walking">
      <span class="pill-icon">ğŸš¶</span>
      <span class="pill-label">Walk</span>
    </button>
    <button class="pill mode-pill" data-mode="cycling" title="Cycling">
      <span class="pill-icon">ğŸš´</span>
      <span class="pill-label">Cycle</span>
    </button>
  </div>
</nav>


    <div class="stage">
      <!-- MAP -->
      <section class="map-wrap">
        <div id="map" role="application" aria-label="Map"></div>
      </section>

      <!-- RIGHT RAIL (collapsed) + PANEL (expanded) -->
      <aside id="hud" class="hud">
        <!-- COLLAPSED RAIL -->
        <!-- <div class="rail">
          <button
            id="hudToggle"
            class="rail-tab"
            aria-label="Open Control Panel"
            aria-expanded="false"
          >
            â˜°
          </button>
          <div class="rail-icons">
            <button class="rail-icon" data-open="search" title="Search">
              ğŸ”
            </button>
            <button class="rail-icon" data-open="categories" title="Categories">
              âœ¨
            </button>
            <button class="rail-icon" data-open="modes" title="Modes">
              âš™ï¸
            </button>
            <button class="rail-icon" data-open="status" title="Status">
              ğŸ’¡
            </button>
          </div>
        </div> -->

        <!-- EXPANDING PANEL -->
        <div
          class="panel"
          role="dialog"
          aria-modal="false"
          aria-label="Controls"
        >
          <header class="panel-header">
            <div class="brand">
              <span class="logo-dot"></span>
              <span class="brand-text">NAV<span class="accent">HUD</span></span>
            </div>
            <button id="hudClose" class="close-btn" aria-label="Close">
              âœ•
            </button>
          </header>

          <div class="panel-scroll">
            <!-- <section class="block" id="blk-search">
              <label class="label">Search</label>
              <input
                id="search"
                class="hud-input"
                placeholder="Search places (e.g., 'hospital near Andheri')"
              />
            </section> -->

            <section class="block" id="blk-categories">
            <label class="label">Quick Categories</label>
            <div class="chip-row">
              <button class="chip" data-cat="hospital">Hospitals</button>
              <button class="chip" data-cat="atm">ATMs</button>
              <button class="chip" data-cat="fuel">Fuel</button>
              <button class="chip" data-cat="restaurant">Restaurants</button>
              <button class="chip" data-cat="cafe">Cafes</button>
              <button class="chip" data-cat="pharmacy">Pharmacies</button>
              <button class="chip" data-cat="supermarket">Supermarkets</button>
              <button class="chip" data-cat="parking">Parking</button>
            </div>
          </section>


            <section class="block" id="blk-modes">
              <!-- <label class="label">Mode</label>
              <div class="mode-row">
                <button
                  class="mode-btn active"
                  data-mode="driving"
                  title="Driving"
                >
                  ğŸš—
                </button>
                <button class="mode-btn" data-mode="walking" title="Walking">
                  ğŸš¶
                </button>
                <button class="mode-btn" data-mode="cycling" title="Cycling">
                  ğŸš´
                </button>
              </div> -->
            </section>

            <section class="block" id="blk-favorites">
            <label class="label">Favorites</label>
            <div id="favoritesList" style="display:flex;flex-direction:column;gap:8px;">
              <!-- favorites will be rendered here -->
            </div>
            <div style="margin-top:8px;">
              <button id="clearFavoritesBtn" class="chip" title="Clear all favorites">Clear favorites</button>
            </div>
          </section>



          <section class="block" id="blk-status">
          <label class="label">Status</label>
          <div class="hud-card">
            <div class="pill">
              <span class="pill-label">SYSTEM</span>
              <span id="statusText" class="pill-value">HUD Online</span>
            </div>

            <!-- Clear destination button -->
              <div style="margin-top:12px; display:flex; gap:8px; align-items:center;">
                <button id="clearDestinationBtn" class="chip" title="Remove destination and route">
                  Clear destination
                </button>
              </div>
            </div>
            <button id="clearStartBtn" class="chip" title="Clear start">Clear start</button>


            <button id="addDestinationFavBtn" class="chip" title="Add destination to favorites">â˜† Save destination</button>

            <!-- ROUTE INFO (populated by JS when a route is found) -->
            <div style="margin-top:10px; display:flex; gap:10px; align-items:center; font-family: Inter, sans-serif;">
              <div style="font-size:13px; color:var(--muted)">
                <div style="font-size:11px; letter-spacing:1px; color:var(--muted)">DISTANCE</div>
                <div id="routeDistance" style="font-weight:700; color:var(--accent)">â€”</div>
              </div>
              <div style="font-size:13px; color:var(--muted)">
                <div style="font-size:11px; letter-spacing:1px; color:var(--muted)">ETA</div>
                <div id="routeEta" style="font-weight:700; color:var(--accent)">â€”</div>
              </div>
            </div>
          </div>
        </section>


          </div>
        </div>
      </aside>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Leaflet Routing Machine (added for routing) -->
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

    <!-- App JS -->
    <script src="{{ url_for('static', filename='js/map.js') }}"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
  </body>
</html>
